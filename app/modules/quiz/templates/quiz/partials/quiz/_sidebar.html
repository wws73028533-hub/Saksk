{# toast + sidebar + overlay #}
<div id="toast">è¯·å…ˆå®Œæˆä½œç­”ï¼</div>
<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

<div class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <div class="sidebar-title-row">
      <span>é¢˜ç›®åˆ—è¡¨</span>
      <span style="cursor:pointer; font-size:20px;" onclick="toggleSidebar()">Ã—</span>
    </div>

    {% if mode != 'exam' %}
      <div style="display: flex; gap: 8px; width: 100%;">
        <button class="btn-menu" style="flex:1; color:#dc3545; border-color:#dc3545;" onclick="clearProgress()">ğŸ—‘ï¸ æ¸…é™¤</button>
        <script>
          const params = new URLSearchParams(window.location.search);
          if (params.get('shuffle_questions') === '1') {
            document.write('<button class="btn-menu" style="flex:1;" onclick="reshuffle()">ğŸ² é‡æ’</button>');
          }
        </script>
      </div>
    {% endif %}
  </div>

  <div class="sidebar-content" id="question-list">
    {% if questions|length == 0 %}
      <div class="empty-state">
        ğŸ—’ï¸ æ²¡æœ‰é¢˜ç›®ï¼Œè¯·é‡æ–°é€‰æ‹©ç§‘ç›®å’Œé¢˜å‹ã€‚
        <div style="margin-top:10px;">
          <a class="btn-menu" href="/" style="text-decoration:none; padding:8px 12px; border:1px solid var(--border-color); border-radius:6px;">è¿”å›é¦–é¡µ</a>
        </div>
      </div>
    {% else %}
      {% for q in questions %}
        <div class="q-item" id="list-item-{{ loop.index0 }}" onclick="jumpTo({{ loop.index0 }})">
          <span style="width:25px; font-size:12px; color:#999;">{{ loop.index }}</span>
          <span style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex:1;">{{ q.content }}</span>
          {% if mode == 'exam' %}
            <span style="font-size:12px; color:#6610f2; margin-left:5px;">{{ q.score_val }}åˆ†</span>
          {% endif %}
        </div>
      {% endfor %}
    {% endif %}
  </div>
</div>

