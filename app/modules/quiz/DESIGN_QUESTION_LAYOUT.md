# 选择题/判断题答题页面布局重构设计文档

## 一、设计目标

重新设计选择题和判断题的答题页面布局，采用卡片式分离设计，提升视觉层次和用户体验。

## 二、当前布局分析

### 2.1 现有结构
```
┌─────────────────────────────────┐
│  菜单栏（题目列表/分享/退出）    │
├─────────────────────────────────┤
│  刷题进度条                      │
├─────────────────────────────────┤
│  题目类型标签                    │
│  题干内容                        │
│  题目图片（如有）                │
│  ┌───────────────────────────┐  │
│  │ 选项A                     │  │
│  │ 选项B                     │  │
│  │ 选项C                     │  │
│  │ 选项D                     │  │
│  └───────────────────────────┘  │
│  答案卡片（隐藏，由JS控制显示）  │
│  解析卡片（隐藏，由JS控制显示）  │
├─────────────────────────────────┤
│  底部操作按钮                    │
└─────────────────────────────────┘
```

### 2.2 存在的问题
- 题干和选项混在一个容器中，视觉层次不清晰
- 选项虽然在一个卡片内，但不够独立突出
- 答案和解析在题目容器内隐藏，显示时布局不够清晰

## 三、新布局设计方案

### 3.1 整体布局结构

```
┌─────────────────────────────────────────────┐
│  菜单栏（题目列表/分享/退出/主题切换）       │  ← 固定顶部
├─────────────────────────────────────────────┤
│  刷题进度条                                  │  ← 固定顶部下方
├─────────────────────────────────────────────┤
│                                             │
│  ┌───────────────────────────────────────┐ │
│  │ 【题目类型】题干卡片                   │ │
│  │                                       │ │
│  │  题干内容文本...                      │ │
│  │  [题目图片，如有]                     │ │
│  └───────────────────────────────────────┘ │
│                                             │
│  ┌───────────────────────────────────────┐ │
│  │ 选项A卡片                              │ │
│  └───────────────────────────────────────┘ │
│  ┌───────────────────────────────────────┐ │
│  │ 选项B卡片                              │ │
│  └───────────────────────────────────────┘ │
│  ┌───────────────────────────────────────┐ │
│  │ 选项C卡片                              │ │
│  └───────────────────────────────────────┘ │
│  ┌───────────────────────────────────────┐ │
│  │ 选项D卡片                              │ │
│  └───────────────────────────────────────┘ │
│                                             │
│  ┌───────────────────────────────────────┐ │
│  │ 答案卡片（显示时）                     │ │
│  │  答案：A                              │ │
│  └───────────────────────────────────────┘ │
│                                             │
│  ┌───────────────────────────────────────┐ │
│  │ 解析卡片（显示时）                     │ │
│  │  解析内容...                          │ │
│  └───────────────────────────────────────┘ │
│                                             │
├─────────────────────────────────────────────┤
│  底部操作按钮（上一题/下一题/查看结果等）   │
└─────────────────────────────────────────────┘
```

### 3.2 判断题布局结构

```
┌─────────────────────────────────────────────┐
│  菜单栏                                      │
├─────────────────────────────────────────────┤
│  刷题进度条                                  │
├─────────────────────────────────────────────┤
│                                             │
│  ┌───────────────────────────────────────┐ │
│  │ 【判断题】题干卡片                      │ │
│  │  题干内容文本...                      │ │
│  │  [题目图片，如有]                     │ │
│  └───────────────────────────────────────┘ │
│                                             │
│  ┌───────────────────────────────────────┐ │
│  │ 正确选项卡片                            │ │
│  └───────────────────────────────────────┘ │
│  ┌───────────────────────────────────────┐ │
│  │ 错误选项卡片                            │ │
│  └───────────────────────────────────────┘ │
│                                             │
│  ┌───────────────────────────────────────┐ │
│  │ 答案卡片（显示时）                     │ │
│  │  答案：正确                            │ │
│  └───────────────────────────────────────┘ │
│                                             │
│  ┌───────────────────────────────────────┐ │
│  │ 解析卡片（显示时）                     │ │
│  │  解析内容...                          │ │
│  └───────────────────────────────────────┘ │
│                                             │
├─────────────────────────────────────────────┤
│  底部操作按钮                                │
└─────────────────────────────────────────────┘
```

## 四、详细设计规范

### 4.1 菜单栏（Header）
- **位置**：页面最顶部，固定定位
- **内容**：
  - 左侧：题目列表按钮、分享按钮
  - 中间：模式徽章（刷题/背题/考试）或计时器（考试模式）
  - 右侧：主题切换按钮、退出按钮
- **样式**：保持现有样式，无需改动

### 4.2 刷题进度条（Progress Bar）
- **位置**：菜单栏下方，固定定位
- **样式**：保持现有样式，无需改动

### 4.3 题干卡片（Question Card）
- **结构**：
  ```html
  <div class="question-stem-card">
    <div class="question-header">
      <span class="q-type-label">选择题</span>
      <span class="question-score">(5分)</span> <!-- 仅考试模式显示 -->
      <button class="fav-btn">收藏按钮</button> <!-- 收藏按钮移到题干卡片右上角 -->
    </div>
    <div class="question-content">
      <div class="q-content">题干文本内容</div>
      <div class="question-image-gallery">题目图片</div>
    </div>
  </div>
  ```
- **样式要求**：
  - 独立的卡片容器，带有圆角和阴影
  - 背景：毛玻璃效果（glassmorphism）
  - 内边距：20-24px
  - 外边距：底部16-20px，与其他卡片保持间距
  - 字体：题干内容使用较大字号（20px），加粗显示

### 4.4 选项卡片（Option Cards）- 选择题
- **结构**：
  ```html
  <div class="options-container">
    <div class="option-card" data-option="A">
      <label>
        <input type="checkbox" value="A">
        <span class="option-label">A</span>
        <span class="option-text">选项内容文本</span>
      </label>
    </div>
    <!-- 选项B、C、D类似 -->
  </div>
  ```
- **样式要求**：
  - 每个选项独立为一个卡片
  - 卡片间距：12-16px
  - 卡片样式：
    - 圆角：12-14px
    - 背景：毛玻璃效果
    - 边框：0.5px 细边框
    - 内边距：16-20px
    - 最小高度：56-64px（确保点击区域足够）
  - 选中状态：
    - 背景色变化（浅蓝色背景）
    - 边框颜色变化（主色调）
    - 左侧显示选中标记（圆形或对勾）
  - 悬停效果：轻微背景色变化和阴影

### 4.5 选项卡片（Option Cards）- 判断题
- **结构**：
  ```html
  <div class="options-container tf-options-container">
    <div class="option-card tf-option-card" data-option="correct">
      <label>
        <input type="radio" name="tf-option" value="正确">
        <span class="option-icon">✓</span>
        <span class="option-text">正确</span>
      </label>
    </div>
    <div class="option-card tf-option-card" data-option="wrong">
      <label>
        <input type="radio" name="tf-option" value="错误">
        <span class="option-icon">✕</span>
        <span class="option-text">错误</span>
      </label>
    </div>
  </div>
  ```
- **样式要求**：
  - 与选择题选项卡片样式一致
  - 两个选项并排显示（或垂直排列，根据屏幕宽度自适应）
  - 正确选项图标：绿色 ✓
  - 错误选项图标：红色 ✕

### 4.6 答案卡片（Answer Card）
- **结构**：
  ```html
  <div class="answer-card quiz-card">
    <div class="analysis-title">
      <span class="dot"></span>
      <strong>答案</strong>
      <span class="result-badge">答对/答错徽标</span>
    </div>
    <div class="answer-content">
      <span class="answer correct">A</span>
    </div>
  </div>
  ```
- **显示时机**：
  - 选择题/判断题：选择后自动显示（autoCheck）
  - 多选题/填空题/问答题：点击"查看结果"按钮后显示
- **样式要求**：
  - 独立的卡片容器
  - 显示在选项卡片下方
  - 间距：与选项卡片保持16-20px间距
  - 答对/答错徽标显示在标题右侧

### 4.7 解析卡片（Explanation Card）
- **结构**：
  ```html
  <div class="explanation-card quiz-card">
    <div class="analysis-title">
      <span class="dot"></span>
      <strong>解析</strong>
    </div>
    <div class="explanation-content">
      <p>解析内容文本...</p>
    </div>
  </div>
  ```
- **显示时机**：与答案卡片同时显示（如果有解析内容）
- **样式要求**：
  - 独立的卡片容器
  - 显示在答案卡片下方
  - 间距：与答案卡片保持12-16px间距

### 4.8 底部操作按钮（Footer）
- **位置**：页面底部，固定定位
- **内容**：上一题、下一题、查看结果、交卷等按钮
- **样式**：保持现有样式，无需改动

## 五、响应式设计

### 5.1 移动端（< 768px）
- 题干卡片：全宽，内边距适当减小（16-18px）
- 选项卡片：全宽，垂直排列，间距12px
- 判断题选项：垂直排列（不并排）

### 5.2 平板端（768px - 1024px）
- 题干卡片：最大宽度限制，居中显示
- 选项卡片：可考虑两列布局（如果选项文字较短）

### 5.3 桌面端（> 1024px）
- 题干卡片：最大宽度800-900px，居中显示
- 选项卡片：全宽，垂直排列
- 内容区域：最大宽度限制，居中显示

## 六、交互设计

### 6.1 选项交互
- **点击区域**：整个选项卡片可点击
- **选中反馈**：
  - 立即视觉反馈（背景色、边框色变化）
  - 选中标记显示
- **自动检查**：
  - 选择题/判断题：选择后自动调用 `autoCheck()` 显示答案和解析
  - 多选题：不自动检查，需点击"查看结果"

### 6.2 答案/解析显示
- **动画效果**：
  - 淡入动画（opacity: 0 → 1）
  - 轻微上滑效果（translateY: -10px → 0）
  - 过渡时间：0.3-0.4s

### 6.3 状态管理
- **已答题状态**：选项卡片保持选中样式
- **答对/答错状态**：
  - 答案卡片显示对应徽标
  - 选项卡片显示正确/错误标记（可选）

## 七、技术实现要点

### 7.1 HTML结构修改
- 将题干从 `.question-box` 中分离，创建独立的 `.question-stem-card`
- 将选项从 `.input-area` 中分离，每个选项创建独立的 `.option-card`
- 答案和解析卡片从题目容器中移出，作为独立卡片显示

### 7.2 CSS样式
- 新增卡片样式类：
  - `.question-stem-card`：题干卡片
  - `.option-card`：选项卡片
  - `.options-container`：选项容器
  - `.answer-card`：答案卡片（可复用 `.quiz-card`）
  - `.explanation-card`：解析卡片（可复用 `.quiz-card`）
- 保持毛玻璃效果和圆角设计
- 确保选中状态样式清晰

### 7.3 JavaScript逻辑
- 保持现有的 `autoCheck()` 函数逻辑
- 保持现有的 `checkAnswer()` 函数逻辑
- 保持现有的选项点击事件处理
- 答案/解析显示逻辑无需改动（已从题目容器中移出）

### 7.4 兼容性考虑
- 保持现有的 DOM 结构要求（`data-type`、`data-answer` 等属性）
- 保持现有的 JavaScript 选择器（如 `.question-box`、`.options` 等）
- 确保现有功能不受影响（收藏、分享、题目列表等）

## 八、设计原则

### 8.1 视觉层次
- 题干卡片：最大，最突出
- 选项卡片：中等大小，清晰可辨
- 答案/解析卡片：较小，作为补充信息

### 8.2 间距系统
- 卡片间距：12-20px（根据内容密度调整）
- 内边距：16-24px（根据卡片大小调整）
- 外边距：16-20px（与页面边缘和其他区域）

### 8.3 颜色系统
- 保持现有的主题色系统
- 选中状态：使用主色调（蓝色）
- 正确状态：使用成功色（绿色）
- 错误状态：使用危险色（红色）

### 8.4 动画系统
- 过渡时间：0.3-0.4s
- 缓动函数：cubic-bezier(0.4, 0, 0.2, 1)
- 动画类型：淡入、上滑、缩放（轻微）

## 九、实施步骤建议

### 阶段一：HTML结构重构
1. 修改 `_question.html` 模板
2. 分离题干和选项结构
3. 创建独立的卡片容器

### 阶段二：CSS样式开发
1. 创建题干卡片样式
2. 创建选项卡片样式（选择题）
3. 创建选项卡片样式（判断题）
4. 调整答案/解析卡片样式
5. 实现响应式布局

### 阶段三：交互优化
1. 测试选项点击交互
2. 测试答案/解析显示动画
3. 测试选中状态样式
4. 测试移动端响应式

### 阶段四：测试与优化
1. 功能测试（所有题型）
2. 兼容性测试（不同浏览器）
3. 性能测试（动画流畅度）
4. 用户体验测试

## 十、注意事项

1. **保持向后兼容**：确保现有的 JavaScript 逻辑和 DOM 选择器仍然有效
2. **保持功能完整**：收藏、分享、题目列表等功能不受影响
3. **性能考虑**：卡片数量增加可能影响渲染性能，需要优化
4. ** accessibility**：确保键盘导航和屏幕阅读器支持
5. **主题切换**：确保深色模式和浅色模式都正常显示

## 十一、设计参考

- **iOS 18 风格**：简洁、现代、毛玻璃效果
- **Apple 设计语言**：圆角、间距、颜色系统
- **Bento Grid 布局**：卡片式布局系统
- **Glassmorphism**：毛玻璃效果，提升视觉层次

---

**文档版本**：v1.0  
**创建日期**：2025-01-27  
**最后更新**：2025-01-27

