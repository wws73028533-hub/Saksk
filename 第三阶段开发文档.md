# ç¬¬ä¸‰é˜¶æ®µå¼€å‘æ–‡æ¡£ - UIä¼˜åŒ–å’Œä½“éªŒæå‡

## ğŸ“‹ æ¦‚è¿°

ç¬¬ä¸‰é˜¶æ®µä¸»è¦ä¸“æ³¨äºUI/UXä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒæå‡ï¼ŒåŒ…æ‹¬iOS 18é£æ ¼è®¾è®¡å®ç°ã€æœç´¢ç­›é€‰åŠŸèƒ½ã€æ‰¹é‡æ“ä½œä¼˜åŒ–å’Œå“åº”å¼å¸ƒå±€ã€‚æœ¬é˜¶æ®µä¸æ¶‰åŠåç«¯é€»è¾‘å˜æ›´ï¼Œä¸“æ³¨äºå‰ç«¯äº¤äº’å’Œè§†è§‰è®¾è®¡ã€‚

---

## ğŸ¯ é˜¶æ®µç›®æ ‡

1. âœ… å®ç°å®Œæ•´çš„iOS 18é£æ ¼UIè®¾è®¡ï¼ˆæ¯›ç»ç’ƒæ•ˆæœã€åœ†è§’ã€é˜´å½±ï¼‰
2. âœ… å®ç°æœç´¢/ç­›é€‰åŠŸèƒ½ï¼ˆç”¨æˆ·æœç´¢ã€ç§‘ç›®ç­›é€‰ï¼‰
3. âœ… ä¼˜åŒ–æ‰¹é‡æ“ä½œä½“éªŒï¼ˆå…¨é€‰ã€åé€‰ã€æ‰¹é‡æ“ä½œæç¤ºï¼‰
4. âœ… å®ç°å“åº”å¼å¸ƒå±€ï¼ˆæ¡Œé¢ç«¯ã€å¹³æ¿ã€ç§»åŠ¨ç«¯é€‚é…ï¼‰
5. âœ… ä¼˜åŒ–äº¤äº’ä½“éªŒï¼ˆåŠ¨ç”»è¿‡æ¸¡ã€åŠ è½½çŠ¶æ€ã€é”™è¯¯æç¤ºï¼‰

---

## ğŸ¨ iOS 18 é£æ ¼è®¾è®¡ç³»ç»Ÿ

### 1. CSS å˜é‡å®šä¹‰

**ä½ç½®**ï¼š`app/modules/admin/templates/admin/admin_base.html` æˆ–ç‹¬ç«‹CSSæ–‡ä»¶

```css
:root {
  /* é¢œè‰²ç³»ç»Ÿ - iOS 18 é£æ ¼ */
  --primary: #007AFF;
  --primary-light: rgba(0, 122, 255, 0.1);
  --secondary: #5856D6;
  --success: #34C759;
  --danger: #FF3B30;
  --warning: #FF9500;
  --text-color: #000000;
  --text-sub: rgba(0, 0, 0, 0.6);
  --bg-primary: #FFFFFF;
  --bg-secondary: rgba(142, 142, 147, 0.06);
  --border-color: rgba(0, 0, 0, 0.1);
  
  /* æ¯›ç»ç’ƒæ•ˆæœ */
  --blur: blur(30px) saturate(180%);
  --glass-bg: rgba(255, 255, 255, 0.7);
  
  /* åœ†è§’ç³»ç»Ÿ */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  
  /* é˜´å½±ç³»ç»Ÿ */
  --shadow-soft: 0 2px 8px rgba(0, 0, 0, 0.08);
  --shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  --shadow-strong: 0 8px 24px rgba(0, 0, 0, 0.16);
  
  /* é—´è·ç³»ç»Ÿ */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  
  /* åŠ¨ç”»ç³»ç»Ÿ */
  --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-normal: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

/* æ·±è‰²æ¨¡å¼æ”¯æŒ */
[data-theme="dark"] {
  --text-color: #FFFFFF;
  --text-sub: rgba(255, 255, 255, 0.6);
  --bg-primary: #000000;
  --bg-secondary: rgba(255, 255, 255, 0.06);
  --border-color: rgba(255, 255, 255, 0.1);
  --glass-bg: rgba(0, 0, 0, 0.7);
}
```

### 2. é€šç”¨ç»„ä»¶æ ·å¼

**ä½ç½®**ï¼š`app/modules/admin/templates/admin/admin_base.html` çš„ `<style>` å—

```css
/* æ¯›ç»ç’ƒå¡ç‰‡ */
.glass-card {
  background: var(--glass-bg);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
  border-radius: var(--radius-lg);
  border: 0.5px solid var(--border-color);
  box-shadow: var(--shadow-soft);
  padding: var(--spacing-lg);
  transition: all var(--transition-normal);
}

.glass-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow);
  border-color: var(--border-color);
}

/* iOS 18 é£æ ¼æŒ‰é’® */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 12px 24px;
  border-radius: var(--radius-md);
  font-size: 15px;
  font-weight: 500;
  border: none;
  cursor: pointer;
  transition: all var(--transition-fast);
  letter-spacing: -0.01em;
}

.btn-primary {
  background: var(--primary);
  color: #FFFFFF;
  box-shadow: 0 2px 8px rgba(0, 122, 255, 0.3);
}

.btn-primary:hover {
  background: #0051D5;
  box-shadow: 0 4px 12px rgba(0, 122, 255, 0.4);
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0);
  box-shadow: 0 1px 4px rgba(0, 122, 255, 0.3);
}

.btn-secondary {
  background: var(--bg-secondary);
  color: var(--text-color);
  border: 0.5px solid var(--border-color);
}

.btn-secondary:hover {
  background: rgba(142, 142, 147, 0.12);
}

.btn-outline {
  background: transparent;
  color: var(--primary);
  border: 0.5px solid var(--primary);
}

.btn-outline:hover {
  background: var(--primary-light);
}

/* iOS 18 é£æ ¼è¾“å…¥æ¡† */
.input {
  width: 100%;
  padding: 12px 16px;
  border-radius: var(--radius-md);
  border: 0.5px solid var(--border-color);
  background: var(--glass-bg);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
  font-size: 15px;
  color: var(--text-color);
  transition: all var(--transition-fast);
}

.input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px var(--primary-light);
}

/* iOS 18 é£æ ¼å¤é€‰æ¡† */
.checkbox {
  width: 22px;
  height: 22px;
  border-radius: 6px;
  border: 2px solid var(--border-color);
  background: var(--glass-bg);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
  flex-shrink: 0;
}

.checkbox:checked {
  background: var(--primary);
  border-color: var(--primary);
}

.checkbox:checked::after {
  content: 'âœ“';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #FFFFFF;
  font-size: 14px;
  font-weight: 600;
}

/* iOS 18 é£æ ¼æ ‡ç­¾ */
.tag {
  display: inline-flex;
  align-items: center;
  padding: 6px 12px;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  background: var(--bg-secondary);
  color: var(--text-color);
  border: 0.5px solid var(--border-color);
}

.tag-restricted {
  background: rgba(255, 59, 48, 0.1);
  color: var(--danger);
  border-color: rgba(255, 59, 48, 0.2);
}

.tag-accessible {
  background: rgba(52, 199, 89, 0.1);
  color: var(--success);
  border-color: rgba(52, 199, 89, 0.2);
}

/* åŠ è½½åŠ¨ç”» */
.loading {
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid var(--border-color);
  border-top-color: var(--primary);
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* æ·¡å…¥åŠ¨ç”» */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in {
  animation: fadeIn var(--transition-normal) ease-out;
}
```

---

## ğŸ” æœç´¢/ç­›é€‰åŠŸèƒ½å®ç°

### 1. ç”¨æˆ·è¯¦æƒ…é¡µç§‘ç›®æƒé™ç®¡ç† - æœç´¢åŠŸèƒ½

**ä½ç½®**ï¼š`app/modules/admin/templates/admin/admin_user_detail.html`

```html
<!-- ç§‘ç›®æƒé™ç®¡ç†å¼¹çª—ä¸­çš„æœç´¢æ¡† -->
<div class="search-box">
  <input 
    type="text" 
    id="subject-search" 
    class="input"
    placeholder="æœç´¢ç§‘ç›®..." 
    oninput="filterSubjects()"
    autocomplete="off"
  >
  <svg class="search-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M7 12A5 5 0 1 0 7 2a5 5 0 0 0 0 10zM11 11l3 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
  </svg>
</div>
```

```css
.search-box {
  position: relative;
  margin-bottom: var(--spacing-md);
}

.search-box .input {
  padding-left: 40px;
}

.search-icon {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-sub);
  pointer-events: none;
}
```

```javascript
// ç§‘ç›®æœç´¢è¿‡æ»¤
function filterSubjects() {
  const searchTerm = document.getElementById('subject-search').value.toLowerCase().trim();
  const subjectItems = document.querySelectorAll('.subject-checkbox-item');
  
  subjectItems.forEach(item => {
    const subjectName = item.dataset.subjectName.toLowerCase();
    const matches = subjectName.includes(searchTerm);
    item.style.display = matches ? 'flex' : 'none';
  });
  
  // æ›´æ–°"æœªæ‰¾åˆ°ç»“æœ"æç¤º
  updateNoResultsMessage();
}

function updateNoResultsMessage() {
  const visibleItems = document.querySelectorAll('.subject-checkbox-item[style*="flex"]').length;
  const noResultsMsg = document.getElementById('no-results-message');
  
  if (visibleItems === 0) {
    if (!noResultsMsg) {
      const msg = document.createElement('div');
      msg.id = 'no-results-message';
      msg.className = 'no-results';
      msg.textContent = 'æœªæ‰¾åˆ°åŒ¹é…çš„ç§‘ç›®';
      document.getElementById('subjects-checkbox-list').appendChild(msg);
    }
  } else {
    if (noResultsMsg) {
      noResultsMsg.remove();
    }
  }
}
```

### 2. é¢˜åº“ç®¡ç†é¡µé¢ - ç”¨æˆ·æœç´¢åŠŸèƒ½

**ä½ç½®**ï¼š`app/modules/admin/templates/admin/admin_subject_permissions.html`

```html
<div class="search-toolbar">
  <div class="search-box">
    <input 
      type="text" 
      id="user-search" 
      class="input"
      placeholder="æœç´¢ç”¨æˆ·..." 
      oninput="searchUsers()"
      autocomplete="off"
    >
  </div>
  <button class="btn btn-secondary" onclick="clearSearch()">æ¸…é™¤</button>
</div>
```

```javascript
let searchTimeout = null;

function searchUsers() {
  // é˜²æŠ–å¤„ç†
  clearTimeout(searchTimeout);
  searchTimeout = setTimeout(() => {
    const searchTerm = document.getElementById('user-search').value.trim();
    loadUsers(1, searchTerm); // é‡æ–°åŠ è½½ç”¨æˆ·åˆ—è¡¨
  }, 300);
}

function clearSearch() {
  document.getElementById('user-search').value = '';
  loadUsers(1, '');
}
```

### 3. ç§‘ç›®ç­›é€‰åŠŸèƒ½

```html
<div class="filter-toolbar">
  <select id="subject-filter" class="input" onchange="filterSubjects()">
    <option value="all">æ‰€æœ‰ç§‘ç›®</option>
    <option value="restricted">å·²é™åˆ¶</option>
    <option value="accessible">å¯è®¿é—®</option>
  </select>
</div>
```

```javascript
function filterSubjects() {
  const filterValue = document.getElementById('subject-filter').value;
  const subjectItems = document.querySelectorAll('.subject-item');
  
  subjectItems.forEach(item => {
    const isRestricted = item.dataset.restricted === 'true';
    let show = true;
    
    if (filterValue === 'restricted' && !isRestricted) {
      show = false;
    } else if (filterValue === 'accessible' && isRestricted) {
      show = false;
    }
    
    item.style.display = show ? 'flex' : 'none';
  });
}
```

---

## ğŸ¯ æ‰¹é‡æ“ä½œä¼˜åŒ–

### 1. å…¨é€‰/åé€‰åŠŸèƒ½

**ä½ç½®**ï¼š`app/modules/admin/templates/admin/admin_subject_permissions.html`

```html
<div class="batch-toolbar">
  <button class="btn btn-secondary" onclick="selectAllUsers()">
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
      <rect x="2" y="2" width="12" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/>
      <path d="M5 8l2 2 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
    å…¨é€‰ç”¨æˆ·
  </button>
  <button class="btn btn-secondary" onclick="unselectAllUsers()">å–æ¶ˆå…¨é€‰</button>
  <button class="btn btn-secondary" onclick="selectAllSubjects()">å…¨é€‰ç§‘ç›®</button>
  <button class="btn btn-secondary" onclick="unselectAllSubjects()">å–æ¶ˆå…¨é€‰</button>
  <div class="selection-info">
    å·²é€‰æ‹©: <strong id="selected-count">0</strong> ä¸ªç”¨æˆ·, 
    <strong id="selected-subjects-count">0</strong> ä¸ªç§‘ç›®
  </div>
</div>
```

```javascript
// å…¨é€‰/åé€‰ç”¨æˆ·
function selectAllUsers() {
  const checkboxes = document.querySelectorAll('.user-checkbox:not(:disabled)');
  checkboxes.forEach(cb => {
    cb.checked = true;
    updateUserItemState(cb);
  });
  updateSelectionInfo();
}

function unselectAllUsers() {
  const checkboxes = document.querySelectorAll('.user-checkbox');
  checkboxes.forEach(cb => {
    cb.checked = false;
    updateUserItemState(cb);
  });
  updateSelectionInfo();
}

// å…¨é€‰/åé€‰ç§‘ç›®
function selectAllSubjects() {
  const checkboxes = document.querySelectorAll('.subject-checkbox:not(:disabled)');
  checkboxes.forEach(cb => {
    cb.checked = true;
    updateSubjectItemState(cb);
  });
  updateSelectionInfo();
}

function unselectAllSubjects() {
  const checkboxes = document.querySelectorAll('.subject-checkbox');
  checkboxes.forEach(cb => {
    cb.checked = false;
    updateSubjectItemState(cb);
  });
  updateSelectionInfo();
}

// æ›´æ–°é€‰æ‹©ä¿¡æ¯
function updateSelectionInfo() {
  const selectedUsers = document.querySelectorAll('.user-checkbox:checked').length;
  const selectedSubjects = document.querySelectorAll('.subject-checkbox:checked').length;
  
  document.getElementById('selected-count').textContent = selectedUsers;
  document.getElementById('selected-subjects-count').textContent = selectedSubjects;
  
  // æ›´æ–°æ‰¹é‡æ“ä½œæŒ‰é’®çŠ¶æ€
  const batchBtn = document.getElementById('batch-action-btn');
  if (batchBtn) {
    batchBtn.disabled = selectedUsers === 0 || selectedSubjects === 0;
  }
}
```

### 2. æ‰¹é‡æ“ä½œç¡®è®¤å¼¹çª—

```javascript
function showBatchConfirmDialog(action, userCount, subjectCount) {
  const actionText = action === 'restrict' ? 'é™åˆ¶' : 'å–æ¶ˆé™åˆ¶';
  const message = `ç¡®å®šè¦${actionText} ${userCount} ä¸ªç”¨æˆ·çš„ ${subjectCount} ä¸ªç§‘ç›®å—ï¼Ÿ`;
  
  return new Promise((resolve) => {
    const dialog = document.createElement('div');
    dialog.className = 'modal-overlay';
    dialog.innerHTML = `
      <div class="modal-content">
        <h3 class="modal-header">ç¡®è®¤æ‰¹é‡æ“ä½œ</h3>
        <div class="modal-body">
          <p>${message}</p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline" onclick="this.closest('.modal-overlay').remove(); resolve(false)">å–æ¶ˆ</button>
          <button class="btn btn-primary" onclick="this.closest('.modal-overlay').remove(); resolve(true)">ç¡®è®¤</button>
        </div>
      </div>
    `;
    
    document.body.appendChild(dialog);
    
    dialog.querySelector('.btn-primary').onclick = () => {
      dialog.remove();
      resolve(true);
    };
    
    dialog.querySelector('.btn-outline').onclick = () => {
      dialog.remove();
      resolve(false);
    };
  });
}

async function executeBatchAction(action) {
  const selectedUsers = Array.from(document.querySelectorAll('.user-checkbox:checked'))
    .map(cb => parseInt(cb.value));
  const selectedSubjects = Array.from(document.querySelectorAll('.subject-checkbox:checked'))
    .map(cb => parseInt(cb.value));
  
  if (selectedUsers.length === 0 || selectedSubjects.length === 0) {
    showNotification('è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªç”¨æˆ·å’Œä¸€ä¸ªç§‘ç›®', 'error');
    return;
  }
  
  const confirmed = await showBatchConfirmDialog(action, selectedUsers.length, selectedSubjects.length);
  if (!confirmed) return;
  
  // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
  const btn = event.target;
  const originalText = btn.textContent;
  btn.disabled = true;
  btn.innerHTML = '<span class="loading"></span> å¤„ç†ä¸­...';
  
  try {
    const response = await fetch('/admin/api/subject_permissions/batch', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        action: action,
        user_ids: selectedUsers,
        subject_ids: selectedSubjects
      })
    });
    
    const data = await response.json();
    
    if (data.status === 'success') {
      showNotification(data.message, 'success');
      // é‡æ–°åŠ è½½æ•°æ®
      loadOverviewData();
      // æ¸…é™¤é€‰æ‹©
      unselectAllUsers();
      unselectAllSubjects();
    } else {
      showNotification(data.message || 'æ“ä½œå¤±è´¥', 'error');
    }
  } catch (error) {
    showNotification('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
  } finally {
    btn.disabled = false;
    btn.textContent = originalText;
  }
}
```

### 3. æ“ä½œè¿›åº¦æç¤º

```javascript
function showProgress(message) {
  const progress = document.createElement('div');
  progress.className = 'progress-overlay';
  progress.innerHTML = `
    <div class="progress-content">
      <div class="loading"></div>
      <p>${message}</p>
    </div>
  `;
  document.body.appendChild(progress);
  return progress;
}

function hideProgress(progress) {
  if (progress) {
    progress.remove();
  }
}
```

---

## ğŸ“± å“åº”å¼å¸ƒå±€å®ç°

### 1. é¢˜åº“ç®¡ç†é¡µé¢å“åº”å¼è®¾è®¡

**ä½ç½®**ï¼š`app/modules/admin/templates/admin/admin_subject_permissions.html`

```css
/* æ¡Œé¢ç«¯å¸ƒå±€ï¼ˆé»˜è®¤ï¼‰ */
.permissions-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-lg);
  margin-top: var(--spacing-lg);
}

.user-list-panel,
.subject-list-panel {
  background: var(--glass-bg);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
  border-radius: var(--radius-lg);
  border: 0.5px solid var(--border-color);
  padding: var(--spacing-lg);
  max-height: 600px;
  overflow-y: auto;
}

/* å¹³æ¿å¸ƒå±€ */
@media (max-width: 1024px) {
  .permissions-layout {
    grid-template-columns: 1fr;
    gap: var(--spacing-md);
  }
  
  .user-list-panel,
  .subject-list-panel {
    max-height: 400px;
  }
}

/* ç§»åŠ¨ç«¯å¸ƒå±€ */
@media (max-width: 768px) {
  .container {
    padding: var(--spacing-md);
  }
  
  .batch-toolbar {
    flex-direction: column;
    gap: var(--spacing-sm);
  }
  
  .batch-toolbar .btn {
    width: 100%;
  }
  
  .user-list-panel,
  .subject-list-panel {
    max-height: 300px;
    padding: var(--spacing-md);
  }
  
  .search-toolbar {
    flex-direction: column;
  }
  
  .search-box {
    width: 100%;
  }
}

/* å°å±ç§»åŠ¨ç«¯ */
@media (max-width: 480px) {
  .container {
    padding: var(--spacing-sm);
  }
  
  .glass-card {
    padding: var(--spacing-md);
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
  }
}
```

### 2. ç”¨æˆ·è¯¦æƒ…é¡µå“åº”å¼è®¾è®¡

```css
/* ç”¨æˆ·èµ„æ–™å¡ç‰‡å“åº”å¼ */
@media (max-width: 768px) {
  .profile-section {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
  
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .subject-permission-card {
    padding: var(--spacing-md);
  }
  
  .subjects-tags {
    flex-wrap: wrap;
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .topbar {
    flex-direction: column;
    align-items: stretch;
  }
  
  .ops {
    flex-direction: column;
  }
  
  .ops .btn {
    width: 100%;
  }
}
```

### 3. å¼¹çª—å“åº”å¼è®¾è®¡

```css
.modal-content {
  width: 90%;
  max-width: 600px;
  margin: 20px;
}

@media (max-width: 768px) {
  .modal-content {
    width: 95%;
    max-width: none;
    margin: 10px;
    padding: var(--spacing-md);
  }
  
  .modal-footer {
    flex-direction: column;
  }
  
  .modal-footer .btn {
    width: 100%;
  }
}
```

---

## âœ¨ äº¤äº’ä½“éªŒä¼˜åŒ–

### 1. å¹³æ»‘åŠ¨ç”»è¿‡æ¸¡

```css
/* åˆ—è¡¨é¡¹åŠ¨ç”» */
.list-item {
  transition: all var(--transition-fast);
  animation: fadeIn var(--transition-normal) ease-out;
}

.list-item:hover {
  background: var(--bg-secondary);
  transform: translateX(4px);
}

.list-item:active {
  transform: translateX(2px);
}

/* å¡ç‰‡è¿›å…¥åŠ¨ç”» */
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.card-enter {
  animation: slideUp var(--transition-normal) ease-out;
}

/* æ ‡ç­¾åŠ¨ç”» */
.tag {
  transition: all var(--transition-fast);
}

.tag:hover {
  transform: scale(1.05);
  box-shadow: var(--shadow-soft);
}
```

### 2. åŠ è½½çŠ¶æ€ä¼˜åŒ–

```javascript
// éª¨æ¶å±åŠ è½½
function showSkeletonLoader(containerId) {
  const container = document.getElementById(containerId);
  container.innerHTML = `
    <div class="skeleton-item">
      <div class="skeleton-checkbox"></div>
      <div class="skeleton-content">
        <div class="skeleton-line" style="width: 60%"></div>
        <div class="skeleton-line" style="width: 40%"></div>
      </div>
    </div>
  `.repeat(5);
}

// éª¨æ¶å±æ ·å¼
.skeleton-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  animation: pulse 1.5s ease-in-out infinite;
}

.skeleton-checkbox {
  width: 22px;
  height: 22px;
  border-radius: 6px;
  background: var(--bg-secondary);
}

.skeleton-line {
  height: 12px;
  border-radius: 6px;
  background: var(--bg-secondary);
  margin-bottom: 8px;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}
```

### 3. é”™è¯¯æç¤ºä¼˜åŒ–

```javascript
// ç»Ÿä¸€çš„é€šçŸ¥ç³»ç»Ÿ
function showNotification(message, type = 'info', duration = 3000) {
  const notification = document.createElement('div');
  notification.className = `notification notification-${type}`;
  notification.innerHTML = `
    <div class="notification-content">
      <svg class="notification-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
        ${getNotificationIcon(type)}
      </svg>
      <span>${message}</span>
    </div>
  `;
  
  document.body.appendChild(notification);
  
  // è§¦å‘åŠ¨ç”»
  setTimeout(() => {
    notification.classList.add('show');
  }, 10);
  
  // è‡ªåŠ¨ç§»é™¤
  setTimeout(() => {
    notification.classList.remove('show');
    setTimeout(() => {
      notification.remove();
    }, 300);
  }, duration);
}

function getNotificationIcon(type) {
  const icons = {
    success: '<path d="M10 2L3 9l2 2 5-5 5 5 2-2-7-7z" fill="currentColor"/>',
    error: '<path d="M10 2L3 9l2 2 5-5 5 5 2-2-7-7z" fill="currentColor"/>',
    info: '<circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2" fill="none"/>'
  };
  return icons[type] || icons.info;
}
```

```css
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 10000;
  background: var(--glass-bg);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
  border-radius: var(--radius-md);
  padding: var(--spacing-md) var(--spacing-lg);
  box-shadow: var(--shadow);
  border: 0.5px solid var(--border-color);
  transform: translateX(400px);
  opacity: 0;
  transition: all var(--transition-normal);
}

.notification.show {
  transform: translateX(0);
  opacity: 1;
}

.notification-success {
  border-left: 3px solid var(--success);
}

.notification-error {
  border-left: 3px solid var(--danger);
}

.notification-content {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}
```

### 4. ç©ºçŠ¶æ€è®¾è®¡

```html
<div class="empty-state">
  <svg class="empty-icon" width="64" height="64" viewBox="0 0 64 64" fill="none">
    <!-- ç©ºçŠ¶æ€å›¾æ ‡ -->
  </svg>
  <h3>æš‚æ— æ•°æ®</h3>
  <p>å½“å‰æ²¡æœ‰å¯æ˜¾ç¤ºçš„å†…å®¹</p>
</div>
```

```css
.empty-state {
  text-align: center;
  padding: var(--spacing-xl) var(--spacing-lg);
  color: var(--text-sub);
}

.empty-icon {
  opacity: 0.3;
  margin-bottom: var(--spacing-md);
}

.empty-state h3 {
  font-size: 18px;
  font-weight: 600;
  margin: var(--spacing-md) 0 var(--spacing-sm);
  color: var(--text-color);
}

.empty-state p {
  font-size: 14px;
  color: var(--text-sub);
}
```

---

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

### 1. è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§é‡æ•°æ®æ—¶ï¼‰

```javascript
// è™šæ‹Ÿæ»šåŠ¨å®ç°ï¼ˆé€‚ç”¨äºç”¨æˆ·åˆ—è¡¨å’Œç§‘ç›®åˆ—è¡¨ï¼‰
class VirtualList {
  constructor(container, items, itemHeight = 60) {
    this.container = container;
    this.items = items;
    this.itemHeight = itemHeight;
    this.visibleCount = Math.ceil(container.clientHeight / itemHeight) + 2;
    this.scrollTop = 0;
    
    this.init();
  }
  
  init() {
    this.container.addEventListener('scroll', this.handleScroll.bind(this));
    this.render();
  }
  
  handleScroll() {
    this.scrollTop = this.container.scrollTop;
    this.render();
  }
  
  render() {
    const startIndex = Math.floor(this.scrollTop / this.itemHeight);
    const endIndex = Math.min(startIndex + this.visibleCount, this.items.length);
    
    const visibleItems = this.items.slice(startIndex, endIndex);
    const offsetY = startIndex * this.itemHeight;
    
    // æ¸²æŸ“å¯è§é¡¹
    this.renderItems(visibleItems, offsetY);
  }
  
  renderItems(items, offsetY) {
    // å®ç°å…·ä½“çš„æ¸²æŸ“é€»è¾‘
  }
}
```

### 2. é˜²æŠ–å’ŒèŠ‚æµ

```javascript
// é˜²æŠ–å‡½æ•°
function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}

// èŠ‚æµå‡½æ•°
function throttle(func, limit) {
  let inThrottle;
  return function(...args) {
    if (!inThrottle) {
      func.apply(this, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}

// ä½¿ç”¨ç¤ºä¾‹
const debouncedSearch = debounce(searchUsers, 300);
const throttledScroll = throttle(handleScroll, 100);
```

---

## ğŸ“ å®æ–½æ­¥éª¤

### æ­¥éª¤1ï¼šCSSæ ·å¼ç³»ç»Ÿ

1. åœ¨ `admin_base.html` ä¸­æ·»åŠ CSSå˜é‡å®šä¹‰
2. å®ç°é€šç”¨ç»„ä»¶æ ·å¼ï¼ˆæŒ‰é’®ã€è¾“å…¥æ¡†ã€å¡ç‰‡ç­‰ï¼‰
3. å®ç°iOS 18é£æ ¼åŠ¨ç”»æ•ˆæœ

### æ­¥éª¤2ï¼šæœç´¢ç­›é€‰åŠŸèƒ½

1. åœ¨ç”¨æˆ·è¯¦æƒ…é¡µæ·»åŠ ç§‘ç›®æœç´¢åŠŸèƒ½
2. åœ¨é¢˜åº“ç®¡ç†é¡µé¢æ·»åŠ ç”¨æˆ·æœç´¢åŠŸèƒ½
3. å®ç°ç§‘ç›®ç­›é€‰åŠŸèƒ½
4. æ·»åŠ é˜²æŠ–å¤„ç†

### æ­¥éª¤3ï¼šæ‰¹é‡æ“ä½œä¼˜åŒ–

1. å®ç°å…¨é€‰/åé€‰åŠŸèƒ½
2. æ·»åŠ æ‰¹é‡æ“ä½œç¡®è®¤å¼¹çª—
3. å®ç°æ“ä½œè¿›åº¦æç¤º
4. ä¼˜åŒ–é€‰æ‹©çŠ¶æ€æ˜¾ç¤º

### æ­¥éª¤4ï¼šå“åº”å¼å¸ƒå±€

1. å®ç°æ¡Œé¢ç«¯å¸ƒå±€ï¼ˆé»˜è®¤ï¼‰
2. æ·»åŠ å¹³æ¿é€‚é…ï¼ˆ1024pxä»¥ä¸‹ï¼‰
3. æ·»åŠ ç§»åŠ¨ç«¯é€‚é…ï¼ˆ768pxä»¥ä¸‹ï¼‰
4. æ·»åŠ å°å±ç§»åŠ¨ç«¯é€‚é…ï¼ˆ480pxä»¥ä¸‹ï¼‰

### æ­¥éª¤5ï¼šäº¤äº’ä½“éªŒä¼˜åŒ–

1. æ·»åŠ å¹³æ»‘åŠ¨ç”»è¿‡æ¸¡
2. å®ç°åŠ è½½çŠ¶æ€ï¼ˆéª¨æ¶å±ï¼‰
3. ä¼˜åŒ–é”™è¯¯æç¤ºç³»ç»Ÿ
4. æ·»åŠ ç©ºçŠ¶æ€è®¾è®¡

### æ­¥éª¤6ï¼šæ€§èƒ½ä¼˜åŒ–

1. å®ç°è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¦‚éœ€è¦ï¼‰
2. æ·»åŠ é˜²æŠ–å’ŒèŠ‚æµ
3. ä¼˜åŒ–DOMæ“ä½œ
4. æµ‹è¯•æ€§èƒ½è¡¨ç°

---

## âœ… éªŒæ”¶æ ‡å‡†

1. âœ… æ‰€æœ‰é¡µé¢ç¬¦åˆiOS 18é£æ ¼è®¾è®¡ï¼ˆæ¯›ç»ç’ƒã€åœ†è§’ã€é˜´å½±ï¼‰
2. âœ… æœç´¢åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Œæ”¯æŒå®æ—¶è¿‡æ»¤
3. âœ… ç­›é€‰åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Œæ”¯æŒå¤šæ¡ä»¶ç­›é€‰
4. âœ… æ‰¹é‡æ“ä½œåŠŸèƒ½å®Œå–„ï¼ˆå…¨é€‰ã€åé€‰ã€ç¡®è®¤å¼¹çª—ï¼‰
5. âœ… å“åº”å¼å¸ƒå±€åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šæ­£å¸¸æ˜¾ç¤º
6. âœ… åŠ¨ç”»è¿‡æ¸¡æµç•…è‡ªç„¶
7. âœ… åŠ è½½çŠ¶æ€æ¸…æ™°æ˜ç¡®
8. âœ… é”™è¯¯æç¤ºå‹å¥½æ˜“æ‡‚
9. âœ… ç©ºçŠ¶æ€è®¾è®¡ç¾è§‚
10. âœ… æ€§èƒ½è¡¨ç°è‰¯å¥½ï¼ˆæ— æ˜æ˜¾å¡é¡¿ï¼‰
11. âœ… æ·±è‰²æ¨¡å¼æ”¯æŒï¼ˆå¦‚å·²å®ç°ï¼‰
12. âœ… æ‰€æœ‰äº¤äº’ç¬¦åˆiOSè®¾è®¡è§„èŒƒ

---

## ğŸ“š ç›¸å…³æ–‡ä»¶æ¸…å•

### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

1. `app/modules/admin/templates/admin/admin_base.html` - æ·»åŠ CSSæ ·å¼ç³»ç»Ÿ
2. `app/modules/admin/templates/admin/admin_user_detail.html` - ä¼˜åŒ–ç§‘ç›®æƒé™ç®¡ç†å¡ç‰‡
3. `app/modules/admin/templates/admin/admin_subject_permissions.html` - å®ç°å®Œæ•´é¡µé¢
4. `app/modules/admin/templates/admin/admin_users.html` - ä¼˜åŒ–ç”¨æˆ·åˆ—è¡¨æ˜¾ç¤º

### å¯é€‰æ–‡ä»¶

1. `static/css/admin-ios18.css` - ç‹¬ç«‹çš„CSSæ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰
2. `static/js/admin-interactions.js` - ç‹¬ç«‹çš„JavaScriptæ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è®¾è®¡ä¸€è‡´æ€§**ï¼šç¡®ä¿æ‰€æœ‰é¡µé¢éµå¾ªç›¸åŒçš„è®¾è®¡è§„èŒƒ
2. **æ€§èƒ½è€ƒè™‘**ï¼šå¤§é‡æ•°æ®æ—¶ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨æˆ–åˆ†é¡µ
3. **å¯è®¿é—®æ€§**ï¼šç¡®ä¿é”®ç›˜å¯¼èˆªå’Œå±å¹•é˜…è¯»å™¨æ”¯æŒ
4. **æµè§ˆå™¨å…¼å®¹**ï¼šæµ‹è¯•ä¸»æµæµè§ˆå™¨ï¼ˆChromeã€Safariã€Firefoxã€Edgeï¼‰
5. **ç§»åŠ¨ç«¯ä½“éªŒ**ï¼šç¡®ä¿è§¦æ‘¸æ“ä½œæµç•…è‡ªç„¶
6. **åŠ¨ç”»æ€§èƒ½**ï¼šä½¿ç”¨CSSåŠ¨ç”»è€ŒéJavaScriptåŠ¨ç”»ï¼Œé¿å…é‡æ’é‡ç»˜
7. **ä»£ç ç»„ç»‡**ï¼šä¿æŒCSSå’ŒJavaScriptä»£ç æ•´æ´æœ‰åº

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**åˆ›å»ºæ—¥æœŸ**ï¼š2025-01-29  
**é€‚ç”¨é˜¶æ®µ**ï¼šç¬¬ä¸‰é˜¶æ®µï¼ˆUIä¼˜åŒ–å’Œä½“éªŒæå‡ï¼‰

